<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –≤—è–∑–∞–Ω–∏—è</title>
    <link rel="stylesheet" href="kiniti.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@simonwep/pickr/dist/themes/classic.min.css"/>
    <script src="https://cdn.jsdelivr.net/npm/@simonwep/pickr/dist/pickr.min.js"></script>
</head>
<body>
<div class="container">
    <header>
        <h1>–ö–ª—É–±–æ–∫</h1>
        <p class="subtitle">–¢–≤–æ—ë —Ç–≤–æ—Ä—á–µ—Å–∫–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –¥–ª—è —É—é—Ç–∞ –∏ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è</p>
    </header>
    <div class="nav-buttons">
        <button class="nav-btn" onclick="showSection('projects')">–ü—Ä–æ–µ–∫—Ç—ã</button>
        <button class="nav-btn" onclick="showSection('schemes')">–°—Ö–µ–º—ã</button>
        <button class="nav-btn" onclick="showSection('calculator')">–†–∞—Å—á—ë—Ç</button>
        <button class="nav-btn" onclick="showSection('settings')">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
    </div>
    <div id="projects" class="section">
        <h2>–¢–≤–æ–∏ –ø—Ä–æ–µ–∫—Ç—ã</h2>
        <div class="projects-grid" id="projectsGrid"></div>
    </div>
    <div id="schemes" class="section">
        <h2>–¢–≤–æ–∏ —Å—Ö–µ–º—ã</h2>
        <div class="gallery-grid" id="galleryGrid"></div>
        <input type="file" id="imageInput" accept="image/*,.pdf,.txt,text/plain" style="display:none;" onchange="addImage(this)">
        <button class="upload-btn" onclick="showUploadMenu()">–î–æ–±–∞–≤–∏—Ç—å —Å—Ö–µ–º—É</button>
    </div>
    <div id="calculator" class="section">
        <h2>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ø–µ—Ç–µ–ª—å –∏ —Ä—è–¥–æ–≤</h2>
        <div id="step1" class="calc-step">
            <div class="calc-group">
                <div class="calc-title">–¢–µ–∫—É—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</div>
                <div class="calc-input-group">
                    <label class="calc-label">–®–∏—Ä–∏–Ω–∞ (—Å–º)</label>
                    <input type="number" class="calc-input" id="currentWidth">
                </div>
                <div class="calc-input-group">
                    <label class="calc-label">–î–ª–∏–Ω–∞ (—Å–º)</label>
                    <input type="number" class="calc-input" id="currentLength">
                </div>
                <div class="calc-input-group">
                    <label class="calc-label">–ü–µ—Ç–µ–ª—å</label>
                    <input type="number" class="calc-input" id="currentStitches">
                </div>
                <div class="calc-input-group">
                    <label class="calc-label">–†—è–¥–æ–≤</label>
                    <input type="number" class="calc-input" id="currentRows">
                </div>
            </div>
            <button class="calc-btn" onclick="nextStep()">–î–∞–ª–µ–µ</button>
        </div>
        <div id="step2" class="calc-step" style="display:none;">
            <div class="calc-group">
                <div class="calc-title">–ñ–µ–ª–∞–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</div>
                <div class="calc-input-group">
                    <label class="calc-label">–®–∏—Ä–∏–Ω–∞ (—Å–º)</label>
                    <input type="number" class="calc-input" id="desiredWidth">
                </div>
                <div class="calc-input-group">
                    <label class="calc-label">–î–ª–∏–Ω–∞ (—Å–º)</label>
                    <input type="number" class="calc-input" id="desiredLength">
                </div>
            </div>
            <button class="calc-btn" onclick="calculate()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
        </div>
        <div id="step3" class="calc-step" style="display:none;">
            <div class="calc-result" id="calcResult"></div>
            <div style="display:flex;gap:12px;margin-top:16px;">
                <button class="calc-btn" style="flex:1;" onclick="backToStep2()">–ò–∑–º–µ–Ω–∏—Ç—å</button>
                <button class="calc-btn" style="flex:1;background:#f06292;" onclick="resetCalculator()">–ó–∞–ø–æ–ª–Ω–∏—Ç—å –∑–∞–Ω–æ–≤–æ</button>
            </div>
        </div>
    </div>
    <div id="settings" class="section">
        <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è</h2>
        <div id="customizePanel">
            <div style="margin-bottom:16px; display:flex; gap:8px;">
                <button type="button" class="action-btn" data-palette="light">–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞</button>
                <button type="button" class="action-btn" data-palette="dark">–¢—ë–º–Ω–∞—è —Ç–µ–º–∞</button>
            </div>
            <div id="paletteForm" style="display:flex; gap:16px; flex-wrap:wrap;">
                <!-- –î–ª—è –∫–∞–∂–¥–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π CSS —Ä–∏—Å—É–µ–º –∫—Ä—É–∂–æ–∫-–ø—Ä–µ–≤—å—é -->
                <div class="color-picker-group">
                    <label>–û—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç</label>
                    <div class="color-swatch" data-var="--primary"></div>
                    <input type="color" class="hidden-color-input" data-var="--primary">
                </div>
                <div class="color-picker-group">
                    <label>–í—Ç–æ—Ä–∏—á–Ω—ã–π —Ü–≤–µ—Ç</label>
                    <div class="color-swatch" data-var="--secondary"></div>
                    <input type="color" class="hidden-color-input" data-var="--secondary">
                </div>
                <div class="color-picker-group">
                    <label>–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞</label>
                    <div class="color-swatch" data-var="--dark"></div>
                    <input type="color" class="hidden-color-input" data-var="--dark">
                </div>
                <div class="color-picker-group">
                    <label>–¶–≤–µ—Ç —Ñ–æ–Ω–∞</label>
                    <div class="color-swatch" data-var="--light"></div>
                    <input type="color" class="hidden-color-input" data-var="--light">
                </div>
                <div class="color-picker-group">
                    <label>–¶–≤–µ—Ç —Å—á–µ—Ç—á–∏–∫–∞</label>
                    <div class="color-swatch" data-var="--counter"></div>
                    <input type="color" class="hidden-color-input" data-var="--counter">
                </div>
                <div class="color-picker-group">
                    <label>–¶–≤–µ—Ç –∫–Ω–æ–ø–æ–∫ —Å—á–µ—Ç—á–∏–∫–∞</label>
                    <div class="color-swatch" data-var="--accent"></div>
                    <input type="color" class="hidden-color-input" data-var="--accent">
                </div>
            </div>
            <div id="iconCustomization" style="margin-top:24px">
                <h3 style="margin-bottom:8px">–í—ã–±–æ—Ä –∏–∫–æ–Ω–∫–∏</h3>
                <div style="display:flex; gap:16px">
                    <button type="button" class="icon-choice" data-icon="üß∂">üß∂</button>
                    <button type="button" class="icon-choice" data-icon="üå∏">üå∏</button>
                    <button type="button" class="icon-choice" data-icon="‚≠ê">‚≠ê</button>
                    <button type="button" class="icon-choice" data-icon="ü¶ã">ü¶ã</button>
                    <button type="button" class="icon-choice" data-icon="üçÉ">üçÉ</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ–µ–∫—Ç–∞ -->
<div class="modal" id="projectModal">
    <div class="modal-content">
        <span class="close-modal" onclick="closeModal()">&times;</span>
        <div class="modal-title">
            <input type="text" class="edit-title" id="projectTitleInput">
        </div>
        <div class="counters-list" id="countersList"></div>
        <button class="add-counter-btn" onclick="addCounter()">
            <span>‚ú®</span> <span>–î–æ–±–∞–≤–∏—Ç—å —Å—á—ë—Ç—á–∏–∫</span>
        </button>
        <button class="delete-project-btn" onclick="deleteProject()">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–µ–∫—Ç</button>
    </div>
</div>
<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å—Ö–µ–º—ã -->
<div class="modal" id="imageModal">
    <div style="position:relative;width:100%;height:100%;display:flex;align-items:center;justify-content:center;">
        <img id="modalImage" src="" style="max-width:100%;max-height:100%;object-fit:contain;" />
        <span class="close-modal" onclick="closeImageModal()" style="position:absolute;top:20px;right:20px;font-size:2rem;color:white;z-index:10;">√ó</span>
    </div>
</div>
<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–º–µ—Ç–∫–∏ -->
<div class="modal" id="createNoteModal">
    <div class="modal-content" style="max-width: 90vw; max-height: 90vh; display: flex; flex-direction: column;">
        <span class="close-modal" onclick="closeCreateNoteModal()" style="align-self: flex-end;">&times;</span>
        <div class="modal-title">
            <span>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∑–∞–º–µ—Ç–∫—É</span>
        </div>
        <input type="text" id="newNoteNameInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è —Ñ–∞–π–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ó–∞–º–µ—Ç–∫–∞1.txt)">
        <textarea id="newNoteContentInput" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∑–∞–º–µ—Ç–∫–∏..."></textarea>
        <button class="calc-btn" onclick="saveNewNote()" style="margin-top: 16px;">–°–æ–∑–¥–∞—Ç—å</button>
    </div>
</div>
<div class="modal" id="noteModal"></div>
<div class="modal" id="uploadMenuModal">
    <div class="modal-content">
        <span class="close-modal" onclick="closeUploadMenu()">&times;</span>
        <h3 style="margin:0;text-align:center;color:var(--dark);">–ß—Ç–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å?</h3>
        <button class="calc-btn" onclick="document.getElementById('imageInput').click(); closeUploadMenu();" style="background:#ffbb8a;">üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª</button>
        <button class="calc-btn" onclick="createNewNote(); closeUploadMenu();" style="background:#ffbb8a;">üìù –°–æ–∑–¥–∞—Ç—å –∑–∞–º–µ—Ç–∫—É</button>
    </div>
</div>
<script src="kiniti.js"></script>
</body>
</html>
